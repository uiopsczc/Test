---@class Translation
local Translation = {}

function Translation.InitIfNotInit()
  if Translation.inited then
    return
  end
  Translation.language = CS.CsCat.Client.instance.language
end

function Translation.Translate(content, ...)
  Translation.InitIfNotInit()
  local language = Translation.language
  if not language then
    return string.format(content, ...)
  end
  if content == nil then
    return nil
  end
  local content_escape = string.gsub(string.gsub(content,"\r\n","\n"),"\r", "\n")
  local cfgTranslationData = CfgTranslation.get_by_id(content_escape)
  if cfgTranslationData and cfgTranslationData[language] then
    return string.format(cfgTranslationData[language],...)
  end
  return string.format(content,...)
end

return Translation