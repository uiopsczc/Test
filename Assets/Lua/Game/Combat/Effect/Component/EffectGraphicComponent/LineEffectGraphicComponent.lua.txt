---@class LineEffectGraphicComponent:EffectGraphicComponent
local LineEffectGraphicComponent = Class("LineEffectGraphicComponent", EffectGraphicComponent)

function LineEffectGraphicComponent:OnAllAssetsLoadDone()
	LineEffectGraphicComponent.super.OnAllAssetsLoadDone(self)
	---@type CS.CsCat.XLineRenderer[]
	self.xlineRendererList = table.ConvertCSArray2LuaTable(self._transform:GetComponent(typeof(CS.CsCat.XLineRenderer)))
end

function LineEffectGraphicComponent:_Update(deltaTime, unscaledDeltaTime)
	LineEffectGraphicComponent.super.__Update(self, deltaTime, unscaledDeltaTime)
	self._transform.position = self.effectEntity.transformComponent:GetPosition()
	self._transform.eulerAngles = self.effectEntity.transformComponent:GetEulerAngles()
	for _, xlineRenderer in ipairs(self.xlineRendererList) do
		xlineRenderer.target.position = self.effectEntity:GetComponentByType(LineEffectComponent).target_position
		xlineRenderer.target.eulerAngles = self.effectEntity.transformComponent:GetEulerAngles()
	end
end

return LineEffectGraphicComponent